# ============================================
# Environment Configuration
# ============================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control!

# ============================================
# Application
# ============================================
NODE_ENV=development
PORT=4000

# ============================================
# Database
# ============================================
# PostgreSQL connection string
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=SCHEMA
DATABASE_URL="postgresql://postgres:password@localhost:5432/ecommerce_api?schema=public"

# Database connection pool settings (optional)
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10

# ============================================
# Authentication & Security
# ============================================
# JWT secret key - MUST be changed in production!
# Generate with: openssl rand -base64 32
JWT_SECRET="your-super-secret-jwt-key-change-this-in-production"

# JWT token expiration (e.g., '7d', '24h', '60m')
JWT_EXPIRES_IN=7d

# Bcrypt salt rounds (10-12 recommended, higher = more secure but slower)
BCRYPT_SALT_ROUNDS=10

# ============================================
# Google OAuth 2.0
# ============================================
# Get these from Google Cloud Console > APIs & Services > Credentials
# https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID="your-google-client-id.apps.googleusercontent.com"
GOOGLE_CLIENT_SECRET="your-google-client-secret"
GOOGLE_CALLBACK_URL="http://localhost:4000/auth/google/callback"

# Frontend URL (for redirect after Google auth)
FRONTEND_URL="http://localhost:5173"

# ============================================
# CORS Configuration
# ============================================
# Comma-separated list of allowed origins for production
# Example: https://example.com,https://www.example.com
ALLOWED_ORIGINS="http://localhost:3000,http://localhost:5173"

# ============================================
# Rate Limiting
# ============================================
# Time window in milliseconds
RATE_LIMIT_TTL=60000

# Maximum requests per time window
RATE_LIMIT_MAX=100

# ============================================
# GraphQL Configuration
# ============================================
# Maximum query depth (prevents deeply nested queries)
GRAPHQL_MAX_DEPTH=10

# Maximum query complexity (prevents expensive queries)
GRAPHQL_MAX_COMPLEXITY=1000

# ============================================
# Payment Providers
# ============================================
# Razorpay
RAZORPAY_KEY_ID=your_razorpay_key_id
RAZORPAY_KEY_SECRET=your_razorpay_key_secret
RAZORPAY_WEBHOOK_SECRET=your_razorpay_webhook_secret

# Stripe
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key
STRIPE_WEBHOOK_SECRET=whsec_your_stripe_webhook_secret

# PayPal
PAYPAL_CLIENT_ID=your_paypal_client_id
PAYPAL_CLIENT_SECRET=your_paypal_client_secret
PAYPAL_MODE=sandbox

# ============================================
# Email Service (Optional)
# ============================================
# SMTP configuration for sending emails
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password

# Email sender details
EMAIL_FROM="Ecommerce API <noreply@example.com>"

# ============================================
# File Storage (Optional)
# ============================================
# AWS S3 for file uploads
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_REGION=us-east-1
AWS_S3_BUCKET=your-bucket-name

# Or use local storage
UPLOAD_DIR=./uploads

# ============================================
# Logging
# ============================================
# Log level: error, warn, log, debug, verbose
LOG_LEVEL=log

# Enable structured logging (JSON format)
LOG_JSON=false

# Log file path (optional)
LOG_FILE_PATH=./logs/app.log

# ============================================
# Monitoring & Observability (Optional)
# ============================================
# Sentry for error tracking
SENTRY_DSN=your_sentry_dsn

# New Relic for APM
NEW_RELIC_LICENSE_KEY=your_new_relic_key
NEW_RELIC_APP_NAME=ecommerce-api

# ============================================
# Redis (Optional - for caching/sessions)
# ============================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# ============================================
# Feature Flags (Optional)
# ============================================
# Enable/disable features
FEATURE_SOCIAL_ENABLED=true
FEATURE_REVIEWS_ENABLED=true
FEATURE_CART_ENABLED=true

# ============================================
# Admin Configuration
# ============================================
# Default admin user (created on first run)
ADMIN_EMAIL=admin@example.com
ADMIN_PASSWORD=change-this-password
ADMIN_NAME="System Administrator"

# ============================================
# Audit & Compliance
# ============================================
# Audit log retention in days
AUDIT_LOG_RETENTION_DAYS=90

# Enable audit logging
AUDIT_LOGGING_ENABLED=true

# ============================================
# Performance
# ============================================
# Enable query caching
QUERY_CACHE_ENABLED=false

# Cache TTL in seconds
CACHE_TTL=300

# ============================================
# Development Only
# ============================================
# Enable GraphQL playground (auto-disabled in production)
GRAPHQL_PLAYGROUND=true

# Enable GraphQL introspection (auto-disabled in production)
GRAPHQL_INTROSPECTION=true

# Enable debug mode
DEBUG=false

# ============================================
# Production Deployment
# ============================================
# Cloud Run / Kubernetes health check path
HEALTH_CHECK_PATH=/health

# Graceful shutdown timeout (milliseconds)
SHUTDOWN_TIMEOUT=10000

# ============================================
# Notes
# ============================================
# 1. Always use strong, unique values for secrets in production
# 2. Never commit .env file to version control
# 3. Use environment-specific .env files (.env.production, .env.staging)
# 4. Consider using secret management services (AWS Secrets Manager, HashiCorp Vault)
# 5. Rotate secrets regularly
# 6. Use HTTPS in production
# 7. Enable all security features in production
